# Тестовое задание

## Легенда

В команду тестирования пришла задача: необходимо протестировать оплату зарубежных сервисов.
Запрос на оплату формируется пользователем на frontend и содержит наименование провайдера, сумму и дату.   
Cумма вводится в валюте получателя платежа, а итоговая сумма рассчитывается в рублях в зависимости от курса ЦБ.
Известно, что на текущий момент, нашей платёжной системе, запрещено выполнять платёж на сумму более 15000р.

## Суть задания

Необходимо реализовать мок-сервис имитирующий ответ от https://www.cbr.ru/scripts/XML_daily.asp?date_req=02/03/2002 и
обеспечивающий гибкость, воспроизводимость и надёжность тестов.

Подсказка: начать стоит с написания тесткейсов.

## Особенности

- Микросервисная архитектура и асинхронное взаимодействие не допускают возможность пробрасывать какие либо параметры
  или заголовки для управления моком.
- Единый тестовый стенд с сотнями параллельно запускаемыми end-to-end тестами.

## Будет плюсом:

- makefile/taskfile с командой для запуска
- наличие proto
- наличие swagger
- golang
- использование БД

# Описание самого продукта

## Тест-кейсы в разрезе самого Мока

|      Тип      |                         Название                         | Описание                                                |
|:-------------:|:--------------------------------------------------------:|:--------------------------------------------------------|
| Положительный |         Получение xml с помощью корректного grpc         | Передается grpc запрос с корректным форматом даты       |
| Положительный | Получение xml с помощью корректного параметра даты в url | В ручку сервиса получения xml передается параметры даты |
|  Негативный   |                   Дата больше текущей                    |                                                         |
|  Негативный   |                    Некорректная дата                     |                                                         |
|  Негативный   |                   Неверный формат даты                   |                                                         |
|  Негативный   |                     Передана не дата                     |                                                         |

## Схема БД

![Картинка схемой](image_2025-11-05_21-47-12.png)

## Как реализована гибкость:  
Сделаем отдельные ручки на всевозможные состояния сервиса:  
1) Все работает оптимально
2) Сервис упал
3) Сервис выдает ответ, но в нем не содержится валют
